{% extends "base.html" %}
{% block title %}–ë–∏–ª–ª–∏–Ω–≥ ‚Äî ZeaControl{% endblock %}

{% block content %}
<div class="page-header">
    <h1>–ë–∏–ª–ª–∏–Ω–≥</h1>
    <p>–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –ø—Ä–æ–µ–∫—Ç–æ–≤</p>
</div>

<!-- –°–≤–æ–¥–∫–∞ -->
<div class="stats-grid">
    <div class="stat-card total">
        <div class="stat-icon">üí∞</div>
        <div class="stat-value">{{ total_revenue }}</div>
        <div class="stat-label">–°–æ–º / –º–µ—Å—è—Ü</div>
    </div>
    <div class="stat-card active">
        <div class="stat-icon">‚úÖ</div>
        <div class="stat-value">{{ paid_count }}</div>
        <div class="stat-label">–û–ø–ª–∞—á–µ–Ω–æ</div>
    </div>
    <div class="stat-card suspended">
        <div class="stat-icon">‚ö†Ô∏è</div>
        <div class="stat-value">{{ unpaid_count }}</div>
        <div class="stat-label">–ù–µ –æ–ø–ª–∞—á–µ–Ω–æ</div>
    </div>
</div>

<div class="card">
    <div class="card-header">
        <h2>üí≥ –í—Å–µ –ø—Ä–æ–µ–∫—Ç—ã</h2>
    </div>
    <div class="table-wrapper">
        {% if projects %}
        <table>
            <thead>
                <tr>
                    <th>–ü—Ä–æ–µ–∫—Ç</th>
                    <th>–°—Ç–æ–∏–º–æ—Å—Ç—å/–º–µ—Å</th>
                    <th>–û–ø–ª–∞—á–µ–Ω–æ –¥–æ</th>
                    <th>–°—Ç–∞—Ç—É—Å –æ–ø–ª–∞—Ç—ã</th>
                    <th>Grace –¥–æ</th>
                    <th>–°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞</th>
                </tr>
            </thead>
            <tbody>
                {% for project in projects %}
                <tr>
                    <td>
                        <a href="{% url 'project_detail' project.slug %}" class="project-link">
                            {{ project.name }}
                        </a>
                    </td>
                    <td>
                        {% if project.price_per_month %}
                        {{ project.price_per_month }} —Å–æ–º
                        {% else %}
                        <span style="color: var(--text-muted)">–ë–µ—Å–ø–ª–∞—Ç–Ω–æ</span>
                        {% endif %}
                    </td>
                    <td>
                        {% if project.paid_until %}
                        {{ project.paid_until|date:"d.m.Y" }}
                        {% else %}
                        <span style="color: var(--text-muted)">‚Äî</span>
                        {% endif %}
                    </td>
                    <td>
                        {% if project.is_paid %}
                        <span class="badge badge-active">–û–ø–ª–∞—á–µ–Ω–æ</span>
                        {% elif project.paid_until %}
                        <span class="badge badge-suspended">–ü—Ä–æ—Å—Ä–æ—á–µ–Ω–æ</span>
                        {% else %}
                        <span class="badge badge-new">–ù–µ –∑–∞–¥–∞–Ω–æ</span>
                        {% endif %}
                    </td>
                    <td>
                        {% if project.grace_until %}
                        <span style="color: var(--yellow);">{{ project.grace_until|date:"d.m.Y" }}</span>
                        {% else %}
                        <span style="color: var(--text-muted)">‚Äî</span>
                        {% endif %}
                    </td>
                    <td>
                        <span class="badge badge-{{ project.status }}">{{ project.get_status_display }}</span>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <div class="empty-state">
            <div class="empty-icon">üì≠</div>
            <p>–ù–µ—Ç –ø—Ä–æ–µ–∫—Ç–æ–≤</p>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}